---
const currentPath = Astro.url.pathname;

const navItems = [
  { href: '/', label: 'Start' },
  { href: '/publications/', label: 'Publikationen' },
  { href: '/projekte/', label: 'Projekte' },
  { href: '/teaching/', label: 'Lehre' },
  { href: '/cv/', label: 'Lebenslauf' },
  { href: '/engagement/', label: 'Engagement' },
];

function isActive(href: string): boolean {
  if (href === '/') {
    return currentPath === '/' || currentPath === '/index.html';
  }
  return currentPath.startsWith(href) || currentPath === href.slice(0, -1);
}
---

<nav class="main-nav">
  <button class="hamburger" aria-label="Menu" aria-expanded="false">
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
  </button>

  <ul class="nav-menu">
    {navItems.map((item) => (
      <li>
        <a href={item.href} class:list={[{ active: isActive(item.href) }]}>
          {item.label}
        </a>
      </li>
    ))}
  </ul>
</nav>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const hamburger = document.querySelector('.hamburger');
    const navMenu = document.querySelector('.nav-menu');

    hamburger?.addEventListener('click', () => {
      const isExpanded = hamburger.getAttribute('aria-expanded') !== 'false';
      hamburger.setAttribute('aria-expanded', String(!isExpanded));
      hamburger.classList.toggle('active');
      navMenu?.classList.toggle('active');
    });
  });
</script>
